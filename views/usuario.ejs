<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Usuario</title>
    <link rel="stylesheet" href="/header.css">
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script>
        function confirmLogout() {
            // Show confirmation dialog
            const confirmed = confirm("¿Estás seguro de que deseas cerrar sesión?");
            if (confirmed) {
                // Redirect to the logout URL if confirmed
                location.href = '/log-out'; // Adjust this URL based on your logout endpoint
            }
        }
    </script>
</head>
<body>
    <%- include('./partials/header') %>
    <div id="body">
        <h1>Bienvenido, <%= userData.name %></h1>
        <p>Tu correo: <%= userData.email %></p>
        <p>Tu usuario: <%= userData.username %></p>

        <h2>Reseñas escritas:</h2>
        <ul>
            <% reviews.forEach(review => { %>
                <li>
                    <strong>Película:</strong> <%= review.movie_name %><br>
                    <strong>Reseña:</strong> <%= review.review %><br>
                    <strong>Calificación:</strong> <%= review.rating %>
                </li>
            <% }); %>
        </ul>

        <h2>Películas favoritas:</h2>
        <ul>
            <% favorites.forEach(favorite => { %>
                <li>
                    <strong>Película:</strong> <%= favorite.movie_name %>
                </li>
            <% }); %>
        </ul>

        <!-- Modify the button to call confirmLogout function -->
        <button onclick="confirmLogout()">Cerrar sesión</button>
    </div>
</body>
</html>
